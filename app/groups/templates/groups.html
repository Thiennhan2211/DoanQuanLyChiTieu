{% extends "base.html" %}
{% block content %}
<div class="container my-5">
  <div class="card shadow-sm border-0 rounded-4 p-4">
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <div>
        <h2 class="fw-bold text-success mb-1"> Danh s谩ch nh贸m</h2>
        <small class="text-muted">Qu岷n l媒 c谩c nh贸m chi ti锚u c峄a b岷n</small>
      </div>
      <!-- N煤t t岷o nh贸m duy nh岷t -->
      <a href="{{ url_for('groups.group_new') }}" class="btn btn-success shadow-sm rounded-3 px-4">
        + T岷o nh贸m m峄i
      </a>
    </div>

    {% if groups %}
    <div class="table-responsive rounded-4 overflow-hidden shadow-sm">
      <table class="table align-middle text-center mb-0">
        <thead class="text-white" style="background: linear-gradient(90deg, #4caf50, #81c784);">
          <tr>
            <th scope="col" class="ps-4 text-start">T锚n nh贸m</th>
            <th scope="col">Ngy t岷o</th>
            <th scope="col">Thao t谩c</th>
          </tr>
        </thead>
        <tbody>
          {% for group in groups %}
          <tr class="align-middle" style="transition: transform 0.2s;" 
              onmouseover="this.style.transform='scale(1.02)'" onmouseout="this.style.transform='scale(1)'">
            <td class="fw-semibold ps-4 text-start d-flex align-items-center">
              <i class="bi bi-people-fill text-success me-2 fs-5"></i>
              <a href="{{ url_for('expenses.expense_list', group_id=group.id) }}" class="text-decoration-none text-dark">
                {{ group.name }}
              </a>
            </td>
            <td>{{ group.created_at.strftime('%d/%m/%Y') if group.created_at else '' }}</td>
            <td>
              <a href="{{ url_for('expenses.expense_list', group_id=group.id) }}" class="btn btn-outline-success btn-sm rounded-3 me-1 shadow-sm">
                <i class="bi bi-card-list me-1"></i> Xem
              </a>
              <form action="{{ url_for('groups.delete_group', group_id=group.id) }}" method="POST" style="display:inline;">
                <button type="submit" class="btn btn-outline-danger btn-sm rounded-3 shadow-sm"
                        onclick="return confirm('B岷n c贸 ch岷c mu峄n x贸a nh贸m ny kh么ng?');">
                  <i class="bi bi-trash3 me-1"></i> X贸a
                </button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <div class="text-center py-5">
      <i class="bi bi-emoji-frown display-1 text-muted mb-3"></i>
      <p class="text-muted mb-3">Ch瓢a c贸 nh贸m no. H茫y t岷o nh贸m m峄i!</p>
    </div>
    {% endif %}
  </div>
</div>

<!-- Bootstrap Icons (n岷u base.html ch瓢a include) -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

{% endblock %}
